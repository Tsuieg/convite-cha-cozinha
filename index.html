<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Ch√° de Cozinha üíõ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
:root {
  --principal:#e8c07d;
  --fundo:#faf7f2;
  --card:#ffffff;
  --texto:#3b2f1c;
}
body{margin:0;font-family:Arial,sans-serif;background:var(--fundo);color:var(--texto);overflow-x:hidden;}
header{background:var(--principal);text-align:center;padding:20px;}
main{max-width:820px;margin:auto;padding:15px;}
h2{margin-top:30px;border-bottom:2px solid var(--principal);padding-bottom:5px;}
.item{background:var(--card);margin-top:8px;padding:10px;border-radius:8px;display:flex;gap:10px;align-items:center;}
.item.escolhido{background:#eee;opacity:.6;text-decoration:line-through;}
button{width:100%;margin:25px 0;padding:15px;font-size:18px;background:var(--principal);border:none;border-radius:10px;cursor:pointer;-webkit-appearance:none;}
#popup{position:fixed;inset:0;background:rgba(0,0,0,.8);display:flex;align-items:center;justify-content:center;z-index:9999;}
#popupContent{background:#fff;padding:25px;border-radius:15px;width:85%;max-width:350px;text-align:center;box-shadow:0 10px 25px rgba(0,0,0,0.2);}
input[type=text]{width:100%;padding:15px;font-size:16px;margin-top:10px;box-sizing:border-box;border:1px solid #ccc;border-radius:8px;}
</style>
</head>
<body>

<header>
<h1>üíõ Ch√° de Cozinha üíõ</h1>
<p>Escolha um presente e confirme sua presen√ßa</p>
</header>

<div id="popup">
  <div id="popupContent">
    <h3>Seja bem-vindo(a)!</h3>
    <p>Digite seu nome para continuar:</p>
    <input type="text" id="nomeUsuario" placeholder="Seu nome completo">
    <button id="btnContinuar">Entrar na Lista</button>
  </div>
</div>

<main>
    <h2>üç≥ COZINHA</h2>
    <div class="item" data-item="Lixeira de cozinha"><input type="radio" name="presente" value="Lixeira de cozinha"> Lixeira de cozinha</div>
    <div class="item" data-item="Jogo de potes herm√©ticos"><input type="radio" name="presente" value="Jogo de potes herm√©ticos"> Jogo de potes herm√©ticos</div>
    <div class="item" data-item="Potes organizadores"><input type="radio" name="presente" value="Potes organizadores"> Potes organizadores</div>
    <div class="item" data-item="Jogo de pratos"><input type="radio" name="presente" value="Jogo de pratos"> Jogo de pratos</div>
    <div class="item" data-item="Frigideira antiaderente"><input type="radio" name="presente" value="Frigideira antiaderente"> Frigideira antiaderente</div>
    
    <h2>üß∫ UTILIDADES</h2>
    <div class="item" data-item="Cabides"><input type="radio" name="presente" value="Cabides"> Cabides</div>
    <div class="item" data-item="Extens√£o / filtro de linha"><input type="radio" name="presente" value="Extens√£o / filtro de linha"> Extens√£o / filtro de linha</div>

    <button id="btnConfirmar">Confirmar Presente ‚úÖ</button>
</main>

<script>
// --- CONFIGURA√á√ïES ---
const FORM_URL = "https://docs.google.com/forms/u/0/d/e/1FAIpQLSc5hWc2UH-U3jASCdUcsnuomC6IH9UtouMZDAPrcPLEmpX7RA/formResponse";
const ENTRY_NOME = "entry.656967251"; 
const ENTRY_PRESENTE = "entry.6373781";

// Refer√™ncias
const pop = document.getElementById("popup");
const inNome = document.getElementById("nomeUsuario");
const btnCont = document.getElementById("btnContinuar");
const btnConf = document.getElementById("btnConfirmar");

// Bloquear itens j√° escolhidos (LocalStorage)
const salvos = JSON.parse(localStorage.getItem("presentesEscolhidos")) || [];
document.querySelectorAll(".item").forEach(i => {
    if(salvos.includes(i.dataset.item)){
        i.classList.add("escolhido");
        const rad = i.querySelector("input");
        if(rad) rad.disabled = true;
    }
});

// A√á√ÉO: Bot√£o Continuar (Popup)
btnCont.addEventListener("click", function() {
    if(inNome.value.trim().length < 3) {
        alert("Por favor, digite seu nome completo.");
        return;
    }
    pop.style.display = "none";
});

// A√á√ÉO: Bot√£o Enviar
btnConf.addEventListener("click", function() {
    const selecionado = document.querySelector('input[name="presente"]:checked');
    const nome = inNome.value.trim();

    if(!selecionado) {
        alert("Escolha um presente na lista primeiro.");
        return;
    }

    btnConf.disabled = true;
    btnConf.innerText = "Enviando...";

    const dados = new FormData();
    dados.append(ENTRY_NOME, nome);
    dados.append(ENTRY_PRESENTE, selecionado.value);

    fetch(FORM_URL, {
        method: "POST",
        mode: "no-cors",
        body: dados
    }).then(() => {
        salvos.push(selecionado.value);
        localStorage.setItem("presentesEscolhidos", JSON.stringify(salvos));
        alert("Obrigado, " + nome + "! Confirmado com sucesso. üíõ");
        location.reload();
    }).catch(() => {
        alert("Erro de conex√£o. Tente novamente.");
        btnConf.disabled = false;
        btnConf.innerText = "Confirmar Presente ‚úÖ";
    });
});
</script>

</body>
</html>
